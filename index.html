<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Crucigramas - EspaÃ±ol A1</title>
    <style>
        :root {
            --cell-size: 40px;
            --primary-color: #3498db;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --bg-color: #f4f4f9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .btn-new {
            background-color: var(--primary-color);
            color: white;
        }
        .btn-new:hover { background-color: #2980b9; }

        .btn-check {
            background-color: #f1c40f;
            color: #333;
        }
        .btn-check:hover { background-color: #f39c12; }

        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            max-width: 1200px;
        }

        /* Grid Styles */
        #crossword-grid {
            display: grid;
            gap: 2px;
            background-color: #333;
            padding: 5px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            background-color: #333; /* Color de fondo para celdas vacÃ­as (ocultas) */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .cell-input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            text-transform: uppercase;
            background-color: white;
            color: #333;
            outline: none;
        }

        .cell-input:focus {
            background-color: #e8f6fd;
        }

        .cell-empty {
            background-color: #333; /* Mismo que el borde del grid para ocultar */
            visibility: hidden;
        }

        .cell.correct .cell-input {
            background-color: var(--success-color);
            color: white;
        }

        .cell.incorrect .cell-input {
            background-color: var(--error-color);
            color: white;
        }

        /* Clues Styles */
        .clues-container {
            display: flex;
            flex-direction: column;
            min-width: 300px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .clues-section h3 {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 5px;
            margin-top: 0;
        }

        .clue-item {
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .clue-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 5px;
        }

        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.6rem;
            color: #666;
            z-index: 2;
            pointer-events: none;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            :root {
                --cell-size: 30px;
            }
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            .clues-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <h1>ðŸ‡ªðŸ‡¸ Crucigrama A1</h1>
    
    <div class="controls">
        <button class="btn-new" onclick="initGame()">ðŸ”„ Nuevo Juego</button>
        <button class="btn-check" onclick="checkAnswers()">âœ… Comprobar</button>
    </div>

    <div class="game-container">
        <div id="crossword-grid">
            </div>

        <div class="clues-container">
            <div class="clues-section">
                <h3>Horizontales</h3>
                <div id="clues-horizontal"></div>
            </div>
            <div class="clues-section" style="margin-top: 20px;">
                <h3>Verticales</h3>
                <div id="clues-vertical"></div>
            </div>
        </div>
    </div>

<script>
    // --- DATOS ---
    const vocabulario = [
  { "palabra": "yo", "traduccion_ingles": "I" },
  { "palabra": "tÃº", "traduccion_ingles": "you (singular informal)" },
  { "palabra": "Ã©l", "traduccion_ingles": "he" },
  { "palabra": "ella", "traduccion_ingles": "she" },
  { "palabra": "usted", "traduccion_ingles": "you (singular formal)" },
  { "palabra": "nosotros", "traduccion_ingles": "we (masculine/mixed)" },
  { "palabra": "nosotras", "traduccion_ingles": "we (feminine)" },
  { "palabra": "vosotros", "traduccion_ingles": "you (plural informal masculine/mixed)" },
  { "palabra": "vosotras", "traduccion_ingles": "you (plural informal feminine)" },
  { "palabra": "ellos", "traduccion_ingles": "they (masculine/mixed)" },
  { "palabra": "ellas", "traduccion_ingles": "they (feminine)" },
  { "palabra": "ustedes", "traduccion_ingles": "you (plural formal/informal Latin America)" },
  { "palabra": "espaÃ±ol", "traduccion_ingles": "Spanish (nationality)" },
  { "palabra": "espaÃ±ola", "traduccion_ingles": "Spanish (nationality)" },
  { "palabra": "mexicano", "traduccion_ingles": "Mexican" },
  { "palabra": "mexicana", "traduccion_ingles": "Mexican" },
  { "palabra": "francÃ©s", "traduccion_ingles": "French" },
  { "palabra": "francesa", "traduccion_ingles": "French" },
  { "palabra": "estadounidense", "traduccion_ingles": "American (USA)" },
  { "palabra": "canadiense", "traduccion_ingles": "Canadian" },
  { "palabra": "inglÃ©s", "traduccion_ingles": "English" },
  { "palabra": "inglesa", "traduccion_ingles": "English" },
  { "palabra": "alemÃ¡n", "traduccion_ingles": "German" },
  { "palabra": "alemana", "traduccion_ingles": "German" },
  { "palabra": "italiano", "traduccion_ingles": "Italian" },
  { "palabra": "italiana", "traduccion_ingles": "Italian" },
  { "palabra": "chino", "traduccion_ingles": "Chinese" },
  { "palabra": "china", "traduccion_ingles": "Chinese" },
  { "palabra": "japonÃ©s", "traduccion_ingles": "Japanese" },
  { "palabra": "japonesa", "traduccion_ingles": "Japanese" },
  { "palabra": "coreano", "traduccion_ingles": "Korean" },
  { "palabra": "coreana", "traduccion_ingles": "Korean" },
  { "palabra": "hola", "traduccion_ingles": "hello / hi" },
  { "palabra": "adiÃ³s", "traduccion_ingles": "goodbye" },
  { "palabra": "gracias", "traduccion_ingles": "thank you" },
  { "palabra": "perdÃ³n", "traduccion_ingles": "sorry / excuse me" },
  { "palabra": "encantado", "traduccion_ingles": "pleased to meet you (male)" },
  { "palabra": "encantada", "traduccion_ingles": "pleased to meet you (female)" },
  { "palabra": "quÃ©", "traduccion_ingles": "what" },
  { "palabra": "quiÃ©n", "traduccion_ingles": "who (singular)" },
  { "palabra": "dÃ³nde", "traduccion_ingles": "where" },
  { "palabra": "cuÃ¡ndo", "traduccion_ingles": "when" },
  { "palabra": "cÃ³mo", "traduccion_ingles": "how" },
  { "palabra": "familia", "traduccion_ingles": "family" },
  { "palabra": "padre", "traduccion_ingles": "father" },
  { "palabra": "madre", "traduccion_ingles": "mother" },
  { "palabra": "padres", "traduccion_ingles": "parents" },
  { "palabra": "hijo", "traduccion_ingles": "son" },
  { "palabra": "hija", "traduccion_ingles": "daughter" },
  { "palabra": "hermano", "traduccion_ingles": "brother" },
  { "palabra": "hermana", "traduccion_ingles": "sister" },
  { "palabra": "abuelo", "traduccion_ingles": "grandfather" },
  { "palabra": "abuela", "traduccion_ingles": "grandmother" },
  { "palabra": "tÃ­o", "traduccion_ingles": "uncle" },
  { "palabra": "tÃ­a", "traduccion_ingles": "aunt" },
  { "palabra": "primo", "traduccion_ingles": "cousin (male)" },
  { "palabra": "prima", "traduccion_ingles": "cousin (female)" },
  { "palabra": "profesor", "traduccion_ingles": "teacher (male)" },
  { "palabra": "profesora", "traduccion_ingles": "teacher (female)" },
  { "palabra": "estudiante", "traduccion_ingles": "student" },
  { "palabra": "mÃ©dico", "traduccion_ingles": "doctor (male)" },
  { "palabra": "mÃ©dica", "traduccion_ingles": "doctor (female)" },
  { "palabra": "enfermero", "traduccion_ingles": "nurse (male)" },
  { "palabra": "enfermera", "traduccion_ingles": "nurse (female)" },
  { "palabra": "cocinero", "traduccion_ingles": "cook / chef (male)" },
  { "palabra": "cocinera", "traduccion_ingles": "cook / chef (female)" },
  { "palabra": "policÃ­a", "traduccion_ingles": "police officer" },
  { "palabra": "camarero", "traduccion_ingles": "waiter" },
  { "palabra": "camarera", "traduccion_ingles": "waitress" },
  { "palabra": "secretario", "traduccion_ingles": "secretary (male)" },
  { "palabra": "secretaria", "traduccion_ingles": "secretary (female)" },
  { "palabra": "taxista", "traduccion_ingles": "taxi driver" },
  { "palabra": "cero", "traduccion_ingles": "zero" },
  { "palabra": "uno", "traduccion_ingles": "one" },
  { "palabra": "dos", "traduccion_ingles": "two" },
  { "palabra": "tres", "traduccion_ingles": "three" },
  { "palabra": "cuatro", "traduccion_ingles": "four" },
  { "palabra": "cinco", "traduccion_ingles": "five" },
  { "palabra": "seis", "traduccion_ingles": "six" },
  { "palabra": "siete", "traduccion_ingles": "seven" },
  { "palabra": "ocho", "traduccion_ingles": "eight" },
  { "palabra": "nueve", "traduccion_ingles": "nine" },
  { "palabra": "diez", "traduccion_ingles": "ten" },
  { "palabra": "once", "traduccion_ingles": "eleven" },
  { "palabra": "doce", "traduccion_ingles": "twelve" },
  { "palabra": "trece", "traduccion_ingles": "thirteen" },
  { "palabra": "catorce", "traduccion_ingles": "fourteen" },
  { "palabra": "quince", "traduccion_ingles": "fifteen" },
  { "palabra": "veinte", "traduccion_ingles": "twenty" },
  { "palabra": "treinta", "traduccion_ingles": "thirty" },
  { "palabra": "cuarenta", "traduccion_ingles": "forty" },
  { "palabra": "cincuenta", "traduccion_ingles": "fifty" },
  { "palabra": "sesenta", "traduccion_ingles": "sixty" },
  { "palabra": "setenta", "traduccion_ingles": "seventy" },
  { "palabra": "ochenta", "traduccion_ingles": "eighty" },
  { "palabra": "noventa", "traduccion_ingles": "ninety" },
  { "palabra": "cien", "traduccion_ingles": "one hundred" },
  { "palabra": "lunes", "traduccion_ingles": "Monday" },
  { "palabra": "martes", "traduccion_ingles": "Tuesday" },
  { "palabra": "miÃ©rcoles", "traduccion_ingles": "Wednesday" },
  { "palabra": "jueves", "traduccion_ingles": "Thursday" },
  { "palabra": "viernes", "traduccion_ingles": "Friday" },
  { "palabra": "sÃ¡bado", "traduccion_ingles": "Saturday" },
  { "palabra": "domingo", "traduccion_ingles": "Sunday" },
  { "palabra": "enero", "traduccion_ingles": "January" },
  { "palabra": "febrero", "traduccion_ingles": "February" },
  { "palabra": "marzo", "traduccion_ingles": "March" },
  { "palabra": "abril", "traduccion_ingles": "April" },
  { "palabra": "mayo", "traduccion_ingles": "May" },
  { "palabra": "junio", "traduccion_ingles": "June" },
  { "palabra": "julio", "traduccion_ingles": "July" },
  { "palabra": "agosto", "traduccion_ingles": "August" },
  { "palabra": "septiembre", "traduccion_ingles": "September" },
  { "palabra": "octubre", "traduccion_ingles": "October" },
  { "palabra": "noviembre", "traduccion_ingles": "November" },
  { "palabra": "diciembre", "traduccion_ingles": "December" },
  { "palabra": "primavera", "traduccion_ingles": "spring" },
  { "palabra": "verano", "traduccion_ingles": "summer" },
  { "palabra": "otoÃ±o", "traduccion_ingles": "autumn / fall" },
  { "palabra": "invierno", "traduccion_ingles": "winter" },
  { "palabra": "tiempo", "traduccion_ingles": "weather" },
  { "palabra": "sol", "traduccion_ingles": "sun" },
  { "palabra": "calor", "traduccion_ingles": "heat" },
  { "palabra": "frÃ­o", "traduccion_ingles": "cold" },
  { "palabra": "viento", "traduccion_ingles": "wind" },
  { "palabra": "lluvia", "traduccion_ingles": "rain" },
  { "palabra": "nieve", "traduccion_ingles": "snow" },
  { "palabra": "nube", "traduccion_ingles": "cloud" },
  { "palabra": "nublado", "traduccion_ingles": "cloudy" },
  { "palabra": "tormenta", "traduccion_ingles": "storm" },
  { "palabra": "casa", "traduccion_ingles": "house" },
  { "palabra": "piso", "traduccion_ingles": "flat / apartment" },
  { "palabra": "habitaciÃ³n", "traduccion_ingles": "room" },
  { "palabra": "dormitorio", "traduccion_ingles": "bedroom" },
  { "palabra": "salÃ³n", "traduccion_ingles": "living room" },
  { "palabra": "comedor", "traduccion_ingles": "dining room" },
  { "palabra": "cocina", "traduccion_ingles": "kitchen" },
  { "palabra": "baÃ±o", "traduccion_ingles": "bathroom" },
  { "palabra": "jardÃ­n", "traduccion_ingles": "garden" },
  { "palabra": "pared", "traduccion_ingles": "wall" },
  { "palabra": "suelo", "traduccion_ingles": "floor" },
  { "palabra": "mesa", "traduccion_ingles": "table" },
  { "palabra": "silla", "traduccion_ingles": "chair" },
  { "palabra": "cama", "traduccion_ingles": "bed" },
  { "palabra": "sofÃ¡", "traduccion_ingles": "sofa / couch" },
  { "palabra": "armario", "traduccion_ingles": "wardrobe / closet" },
  { "palabra": "estanterÃ­a", "traduccion_ingles": "shelf / bookcase" },
  { "palabra": "lÃ¡mpara", "traduccion_ingles": "lamp" },
  { "palabra": "espejo", "traduccion_ingles": "mirror" },
  { "palabra": "televisiÃ³n", "traduccion_ingles": "television" },
  { "palabra": "nevera", "traduccion_ingles": "fridge" },
  { "palabra": "lavadora", "traduccion_ingles": "washing machine" },
  { "palabra": "mÃ³vil", "traduccion_ingles": "mobile phone" },
  { "palabra": "llave", "traduccion_ingles": "key" },
  { "palabra": "reloj", "traduccion_ingles": "watch / clock" },
  { "palabra": "bolso", "traduccion_ingles": "bag / handbag" },
  { "palabra": "cartera", "traduccion_ingles": "wallet" },
  { "palabra": "paraguas", "traduccion_ingles": "umbrella" },
  { "palabra": "dinero", "traduccion_ingles": "money" },
  { "palabra": "tarjeta", "traduccion_ingles": "card (credit/debit)" },
  { "palabra": "libro", "traduccion_ingles": "book" },
  { "palabra": "cuaderno", "traduccion_ingles": "notebook" },
  { "palabra": "papel", "traduccion_ingles": "paper" },
  { "palabra": "bolÃ­grafo", "traduccion_ingles": "pen" },
  { "palabra": "lÃ¡piz", "traduccion_ingles": "pencil" },
  { "palabra": "ordenador", "traduccion_ingles": "computer" },
  { "palabra": "mochila", "traduccion_ingles": "backpack" },
  { "palabra": "ciudad", "traduccion_ingles": "city" },
  { "palabra": "pueblo", "traduccion_ingles": "town / village" },
  { "palabra": "barrio", "traduccion_ingles": "neighborhood" },
  { "palabra": "calle", "traduccion_ingles": "street" },
  { "palabra": "plaza", "traduccion_ingles": "square" },
  { "palabra": "parque", "traduccion_ingles": "park" },
  { "palabra": "tienda", "traduccion_ingles": "shop / store" },
  { "palabra": "supermercado", "traduccion_ingles": "supermarket" },
  { "palabra": "mercado", "traduccion_ingles": "market" },
  { "palabra": "escuela", "traduccion_ingles": "school" },
  { "palabra": "hospital", "traduccion_ingles": "hospital" },
  { "palabra": "farmacia", "traduccion_ingles": "pharmacy" },
  { "palabra": "banco", "traduccion_ingles": "bank" },
  { "palabra": "restaurante", "traduccion_ingles": "restaurant" },
  { "palabra": "bar", "traduccion_ingles": "bar / cafe" },
  { "palabra": "cine", "traduccion_ingles": "cinema / movie theater" },
  { "palabra": "hotel", "traduccion_ingles": "hotel" },
  { "palabra": "museo", "traduccion_ingles": "museum" },
  { "palabra": "aeropuerto", "traduccion_ingles": "airport" },
  { "palabra": "estaciÃ³n", "traduccion_ingles": "station (train/bus)" },
  { "palabra": "coche", "traduccion_ingles": "car" },
  { "palabra": "autobÃºs", "traduccion_ingles": "bus" },
  { "palabra": "metro", "traduccion_ingles": "metro / subway" },
  { "palabra": "tren", "traduccion_ingles": "train" },
  { "palabra": "bicicleta", "traduccion_ingles": "bicycle" },
  { "palabra": "moto", "traduccion_ingles": "motorcycle" },
  { "palabra": "aviÃ³n", "traduccion_ingles": "plane" },
  { "palabra": "taxi", "traduccion_ingles": "taxi" },
  { "palabra": "barco", "traduccion_ingles": "boat / ship" },
  { "palabra": "alto", "traduccion_ingles": "tall (male)" },
  { "palabra": "alta", "traduccion_ingles": "tall (female)" },
  { "palabra": "bajo", "traduccion_ingles": "short (height - male)" },
  { "palabra": "baja", "traduccion_ingles": "short (height - female)" },
  { "palabra": "gordo", "traduccion_ingles": "fat (male)" },
  { "palabra": "gorda", "traduccion_ingles": "fat (female)" },
  { "palabra": "delgado", "traduccion_ingles": "thin (male)" },
  { "palabra": "delgada", "traduccion_ingles": "thin (female)" },
  { "palabra": "guapo", "traduccion_ingles": "handsome" },
  { "palabra": "guapa", "traduccion_ingles": "beautiful / pretty" },
  { "palabra": "feo", "traduccion_ingles": "ugly (male)" },
  { "palabra": "joven", "traduccion_ingles": "young" },
  { "palabra": "mayor", "traduccion_ingles": "old / elderly" },
  { "palabra": "pelo", "traduccion_ingles": "hair" },
  { "palabra": "ojos", "traduccion_ingles": "eyes" },
  { "palabra": "rubio", "traduccion_ingles": "blonde (male)" },
  { "palabra": "morena", "traduccion_ingles": "brunette / dark-haired (female)" },
  { "palabra": "largo", "traduccion_ingles": "long" },
  { "palabra": "corto", "traduccion_ingles": "short (length)" },
  { "palabra": "barba", "traduccion_ingles": "beard" },
  { "palabra": "simpÃ¡tico", "traduccion_ingles": "nice / friendly (male)" },
  { "palabra": "antipÃ¡tico", "traduccion_ingles": "unfriendly / unpleasant" },
  { "palabra": "bueno", "traduccion_ingles": "good / kind" },
  { "palabra": "malo", "traduccion_ingles": "bad / mean" },
  { "palabra": "amable", "traduccion_ingles": "kind / polite" },
  { "palabra": "divertido", "traduccion_ingles": "fun / funny" },
  { "palabra": "aburrido", "traduccion_ingles": "boring" },
  { "palabra": "inteligente", "traduccion_ingles": "intelligent" },
  { "palabra": "trabajador", "traduccion_ingles": "hard-working (male)" },
  { "palabra": "vago", "traduccion_ingles": "lazy" },
  { "palabra": "alegre", "traduccion_ingles": "cheerful / happy" },
  { "palabra": "serio", "traduccion_ingles": "serious" },
  { "palabra": "tÃ­mido", "traduccion_ingles": "shy" },
  { "palabra": "feliz", "traduccion_ingles": "happy" },
  { "palabra": "triste", "traduccion_ingles": "sad" },
  { "palabra": "rojo", "traduccion_ingles": "red" },
  { "palabra": "azul", "traduccion_ingles": "blue" },
  { "palabra": "verde", "traduccion_ingles": "green" },
  { "palabra": "amarillo", "traduccion_ingles": "yellow" },
  { "palabra": "blanco", "traduccion_ingles": "white" },
  { "palabra": "negro", "traduccion_ingles": "black" },
  { "palabra": "marrÃ³n", "traduccion_ingles": "brown" },
  { "palabra": "gris", "traduccion_ingles": "grey" },
  { "palabra": "naranja", "traduccion_ingles": "orange" },
  { "palabra": "rosa", "traduccion_ingles": "pink" },
  { "palabra": "violeta", "traduccion_ingles": "violet / purple" },
  { "palabra": "camiseta", "traduccion_ingles": "t-shirt" },
  { "palabra": "camisa", "traduccion_ingles": "shirt" },
  { "palabra": "pantalÃ³n", "traduccion_ingles": "trousers / pants" },
  { "palabra": "vaqueros", "traduccion_ingles": "jeans" },
  { "palabra": "falda", "traduccion_ingles": "skirt" },
  { "palabra": "vestido", "traduccion_ingles": "dress" },
  { "palabra": "zapatos", "traduccion_ingles": "shoes" },
  { "palabra": "zapatillas", "traduccion_ingles": "sneakers / trainers" },
  { "palabra": "abrigo", "traduccion_ingles": "coat" },
  { "palabra": "chaqueta", "traduccion_ingles": "jacket" },
  { "palabra": "jersey", "traduccion_ingles": "jumper / sweater" },
  { "palabra": "calcetines", "traduccion_ingles": "socks" },
  { "palabra": "bufanda", "traduccion_ingles": "scarf" },
  { "palabra": "gorro", "traduccion_ingles": "hat (winter/beanie)" },
  { "palabra": "guantes", "traduccion_ingles": "gloves" },
  { "palabra": "agua", "traduccion_ingles": "water" },
  { "palabra": "cafÃ©", "traduccion_ingles": "coffee" },
  { "palabra": "leche", "traduccion_ingles": "milk" },
  { "palabra": "tÃ©", "traduccion_ingles": "tea" },
  { "palabra": "zumo", "traduccion_ingles": "juice" },
  { "palabra": "vino", "traduccion_ingles": "wine" },
  { "palabra": "cerveza", "traduccion_ingles": "beer" },
  { "palabra": "pan", "traduccion_ingles": "bread" },
  { "palabra": "huevo", "traduccion_ingles": "egg" },
  { "palabra": "carne", "traduccion_ingles": "meat" },
  { "palabra": "pollo", "traduccion_ingles": "chicken" },
  { "palabra": "pescado", "traduccion_ingles": "fish (food)" },
  { "palabra": "fruta", "traduccion_ingles": "fruit" },
  { "palabra": "manzana", "traduccion_ingles": "apple" },
  { "palabra": "plÃ¡tano", "traduccion_ingles": "banana" },
  { "palabra": "limÃ³n", "traduccion_ingles": "lemon" },
  { "palabra": "verdura", "traduccion_ingles": "vegetables" },
  { "palabra": "ensalada", "traduccion_ingles": "salad" },
  { "palabra": "tomate", "traduccion_ingles": "tomato" },
  { "palabra": "patata", "traduccion_ingles": "potato" },
  { "palabra": "arroz", "traduccion_ingles": "rice" },
  { "palabra": "pasta", "traduccion_ingles": "pasta" },
  { "palabra": "queso", "traduccion_ingles": "cheese" },
  { "palabra": "azÃºcar", "traduccion_ingles": "sugar" },
  { "palabra": "sal", "traduccion_ingles": "salt" },
  { "palabra": "aceite", "traduccion_ingles": "oil" },
  { "palabra": "chocolate", "traduccion_ingles": "chocolate" },
  { "palabra": "menÃº", "traduccion_ingles": "menu (set menu)" },
  { "palabra": "carta", "traduccion_ingles": "menu (a la carte)" },
  { "palabra": "cuenta", "traduccion_ingles": "bill / check" },
  { "palabra": "desayuno", "traduccion_ingles": "breakfast" },
  { "palabra": "almuerzo", "traduccion_ingles": "lunch" },
  { "palabra": "cena", "traduccion_ingles": "dinner" },
  { "palabra": "postre", "traduccion_ingles": "dessert" },
  { "palabra": "plato", "traduccion_ingles": "plate / dish" },
  { "palabra": "vaso", "traduccion_ingles": "glass" },
  { "palabra": "taza", "traduccion_ingles": "cup / mug" },
  { "palabra": "tenedor", "traduccion_ingles": "fork" },
  { "palabra": "cuchillo", "traduccion_ingles": "knife" },
  { "palabra": "cuchara", "traduccion_ingles": "spoon" },
  { "palabra": "servilleta", "traduccion_ingles": "napkin" },
  { "palabra": "rico", "traduccion_ingles": "tasty / good" },
  { "palabra": "delicioso", "traduccion_ingles": "delicious" },
  { "palabra": "ser", "traduccion_ingles": "to be (permanent)" },
  { "palabra": "estar", "traduccion_ingles": "to be (temporary/location)" },
  { "palabra": "tener", "traduccion_ingles": "to have" },
  { "palabra": "haber", "traduccion_ingles": "there is / there are" },
  { "palabra": "querer", "traduccion_ingles": "to want" },
  { "palabra": "poder", "traduccion_ingles": "to be able to / can" },
  { "palabra": "saber", "traduccion_ingles": "to know (facts/skills)" },
  { "palabra": "llamarse", "traduccion_ingles": "to be called" },
  { "palabra": "hablar", "traduccion_ingles": "to speak" },
  { "palabra": "comer", "traduccion_ingles": "to eat" },
  { "palabra": "beber", "traduccion_ingles": "to drink" },
  { "palabra": "vivir", "traduccion_ingles": "to live" },
  { "palabra": "ir", "traduccion_ingles": "to go" },
  { "palabra": "venir", "traduccion_ingles": "to come" },
  { "palabra": "hacer", "traduccion_ingles": "to do / to make" },
  { "palabra": "dormir", "traduccion_ingles": "to sleep" },
  { "palabra": "levantarse", "traduccion_ingles": "to get up" },
  { "palabra": "ducharse", "traduccion_ingles": "to take a shower" },
  { "palabra": "trabajar", "traduccion_ingles": "to work" },
  { "palabra": "gustar", "traduccion_ingles": "to like" },
  { "palabra": "leer", "traduccion_ingles": "to read" },
  { "palabra": "escribir", "traduccion_ingles": "to write" },
  { "palabra": "escuchar", "traduccion_ingles": "to listen" },
  { "palabra": "mirar", "traduccion_ingles": "to look / to watch" },
  { "palabra": "ver", "traduccion_ingles": "to see / to watch" },
  { "palabra": "estudiar", "traduccion_ingles": "to study" },
  { "palabra": "aprender", "traduccion_ingles": "to learn" },
  { "palabra": "jugar", "traduccion_ingles": "to play" },
  { "palabra": "comprar", "traduccion_ingles": "to buy" },
  { "palabra": "viajar", "traduccion_ingles": "to travel" },
  { "palabra": "salir", "traduccion_ingles": "to go out / leave" },
  { "palabra": "llegar", "traduccion_ingles": "to arrive" },
  { "palabra": "entrar", "traduccion_ingles": "to enter" },
  { "palabra": "bien", "traduccion_ingles": "well / good" },
  { "palabra": "mal", "traduccion_ingles": "bad / poorly" },
  { "palabra": "regular", "traduccion_ingles": "so-so / okay" },
  { "palabra": "contento", "traduccion_ingles": "happy / content" },
  { "palabra": "cansado", "traduccion_ingles": "tired" },
  { "palabra": "enfadado", "traduccion_ingles": "angry" },
  { "palabra": "nervioso", "traduccion_ingles": "nervous" },
  { "palabra": "tranquilo", "traduccion_ingles": "calm / relaxed" },
  { "palabra": "ocupado", "traduccion_ingles": "busy" },
  { "palabra": "enfermo", "traduccion_ingles": "sick / ill" },
  { "palabra": "hambre", "traduccion_ingles": "hunger" },
  { "palabra": "sed", "traduccion_ingles": "thirst" },
  { "palabra": "sueÃ±o", "traduccion_ingles": "sleepiness" },
  { "palabra": "miedo", "traduccion_ingles": "fear" },
  { "palabra": "prisa", "traduccion_ingles": "hurry" },
  { "palabra": "aquÃ­", "traduccion_ingles": "here" },
  { "palabra": "allÃ­", "traduccion_ingles": "there" },
  { "palabra": "cerca", "traduccion_ingles": "near / close" },
  { "palabra": "lejos", "traduccion_ingles": "far" },
  { "palabra": "delante", "traduccion_ingles": "in front" },
  { "palabra": "detrÃ¡s", "traduccion_ingles": "behind" },
  { "palabra": "enfrente", "traduccion_ingles": "opposite / facing" },
  { "palabra": "encima", "traduccion_ingles": "on top of" },
  { "palabra": "debajo", "traduccion_ingles": "under / underneath" },
  { "palabra": "dentro", "traduccion_ingles": "inside" },
  { "palabra": "fuera", "traduccion_ingles": "outside" },
  { "palabra": "entre", "traduccion_ingles": "between" },
  { "palabra": "en", "traduccion_ingles": "in / on / at" }
];

    // --- LÃ“GICA DEL JUEGO ---

    // Utilidad para quitar tildes para comparaciones
    function normalize(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function getRandomElement(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    function generateCrosswordLogic() {
        // 1. Filtrar palabras de base (longitud >= 6)
        // Ignoramos frases (con espacios) para simplificar la visualizaciÃ³n
        const singleWords = vocabulario.filter(v => !v.palabra.includes(" ") && !v.palabra.includes("?"));
        const longWords = singleWords.filter(v => v.palabra.length >= 6);
        
        if (longWords.length === 0) return null;

        const MAX_ATTEMPTS = 100;
        let attempt = 0;

        while (attempt < MAX_ATTEMPTS) {
            attempt++;
            
            // 2. Seleccionar palabra base aleatoria
            const baseWordObj = getRandomElement(longWords);
            const baseWord = normalize(baseWordObj.palabra);
            
            // Estructura para guardar palabras colocadas: { wordObj, x, y, dir: 'H'|'V', normalized }
            let placedWords = [];
            
            // Colocar base en (0,0) Horizontal
            placedWords.push({
                wordObj: baseWordObj,
                x: 0,
                y: 0,
                dir: 'H',
                normalized: baseWord
            });

            let usedWords = [baseWordObj.palabra];
            let intersectCount = 0;

            // 3. Intentar cruzar palabras
            // Recorremos letras de la base para encontrar cruces verticales
            for (let i = 0; i < baseWord.length; i++) {
                const char = baseWord[i];
                
                // Buscar candidatas que contengan 'char' y sean mÃ¡s cortas que la base
                // y que no estÃ©n usadas
                const candidates = singleWords.filter(v => {
                    const normV = normalize(v.palabra);
                    return !usedWords.includes(v.palabra) && 
                           v.palabra.length < baseWordObj.palabra.length && // Requisito del prompt
                           normV.includes(char);
                });

                if (candidates.length > 0) {
                    const crosserObj = getRandomElement(candidates);
                    const crosserNorm = normalize(crosserObj.palabra);
                    const charIndex = crosserNorm.indexOf(char); // DÃ³nde cruza en la palabra vertical

                    // PosiciÃ³n de la vertical
                    // Si la base es H en y=0, y la vertical cruza en su letra charIndex en la posiciÃ³n x=i
                    // Entonces la vertical empieza en y = -charIndex
                    const newWord = {
                        wordObj: crosserObj,
                        x: i,
                        y: -charIndex,
                        dir: 'V',
                        normalized: crosserNorm
                    };

                    // Verificar colisiones simples (en este modelo simplificado de 1 base + N verticales,
                    // las verticales son paralelas, solo hay que chequear que no se toquen lateralmente de forma ilegal
                    // o se superpongan. Como x=i avanza, nunca se superponen en X.
                    // Pero hay que evitar que estÃ©n pegadas (x, x+1) si eso crea palabras falsas horizontales.
                    // Para simplificar, forzaremos una distancia de al menos 1 celda entre verticales
                    
                    const tooClose = placedWords.some(pw => pw.dir === 'V' && Math.abs(pw.x - newWord.x) < 2);

                    if (!tooClose) {
                        placedWords.push(newWord);
                        usedWords.push(crosserObj.palabra);
                        intersectCount++;
                    }
                }
                
                // Necesitamos al menos 2
                if (intersectCount >= 2 && Math.random() > 0.5) break; // Seguir un poco mÃ¡s aleatoriamente
            }

            if (intersectCount >= 2) {
                return placedWords;
            }
        }
        return null; // FallÃ³
    }

    let currentWords = [];

    function initGame() {
        const result = generateCrosswordLogic();
        if (!result) {
            // Reintentar si falla (fuerza bruta simple)
            setTimeout(initGame, 0);
            return;
        }
        currentWords = result;
        renderGrid(result);
        renderClues(result);
    }

    function renderGrid(words) {
        const gridContainer = document.getElementById('crossword-grid');
        gridContainer.innerHTML = '';

        // Calcular lÃ­mites
        let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;

        words.forEach(w => {
            const len = w.normalized.length;
            const xEnd = w.dir === 'H' ? w.x + len - 1 : w.x;
            const yEnd = w.dir === 'V' ? w.y + len - 1 : w.y;

            minX = Math.min(minX, w.x);
            maxX = Math.max(maxX, xEnd);
            minY = Math.min(minY, w.y);
            maxY = Math.max(maxY, yEnd);
        });

        const width = maxX - minX + 1;
        const height = maxY - minY + 1;

        // Configurar CSS Grid
        gridContainer.style.gridTemplateColumns = `repeat(${width}, var(--cell-size))`;
        gridContainer.style.gridTemplateRows = `repeat(${height}, var(--cell-size))`;

        // Crear mapa de celdas para evitar duplicados en cruces
        const cellMap = new Map(); // key: "x,y", val: element

        words.forEach((w, index) => {
            const len = w.normalized.length;
            for (let i = 0; i < len; i++) {
                const posX = (w.dir === 'H' ? w.x + i : w.x) - minX; // Normalizar a 0..N
                const posY = (w.dir === 'V' ? w.y + i : w.y) - minY;
                const char = w.normalized[i];
                const key = `${posX},${posY}`;

                // Si ya existe la celda (cruce), usamos la misma
                let cellDiv = cellMap.get(key);
                
                if (!cellDiv) {
                    cellDiv = document.createElement('div');
                    cellDiv.className = 'cell';
                    cellDiv.style.gridColumnStart = posX + 1;
                    cellDiv.style.gridRowStart = posY + 1;

                    const input = document.createElement('input');
                    input.type = 'text';
                    input.maxLength = 1;
                    input.className = 'cell-input';
                    input.dataset.correct = char; // Guardar respuesta correcta (sin tilde)
                    
                    // NavegaciÃ³n simple
                    input.addEventListener('keyup', (e) => {
                        if (e.key.length === 1 && e.key.match(/[a-zÃ±]/i)) {
                            // Mover foco? (ImplementaciÃ³n bÃ¡sica, no direccional compleja)
                        }
                    });

                    cellDiv.appendChild(input);
                    gridContainer.appendChild(cellDiv);
                    cellMap.set(key, cellDiv);
                }

                // Si es el inicio de la palabra, aÃ±adir numerito
                if (i === 0) {
                    const numSpan = document.createElement('span');
                    numSpan.className = 'cell-number';
                    numSpan.innerText = index + 1;
                    // Evitar solapamiento de nÃºmeros si dos palabras empiezan igual (raro aquÃ­)
                    if(!cellDiv.querySelector('.cell-number')) {
                        cellDiv.appendChild(numSpan);
                    }
                }
            }
        });
    }

    function renderClues(words) {
        const hContainer = document.getElementById('clues-horizontal');
        const vContainer = document.getElementById('clues-vertical');
        hContainer.innerHTML = '';
        vContainer.innerHTML = '';

        words.forEach((w, index) => {
            const div = document.createElement('div');
            div.className = 'clue-item';
            // Clue: NÃºmero + TraducciÃ³n
            div.innerHTML = `<span class="clue-number">${index + 1}</span> ${w.wordObj.traduccion_ingles}`;
            
            if (w.dir === 'H') {
                hContainer.appendChild(div);
            } else {
                vContainer.appendChild(div);
            }
        });
    }

    function checkAnswers() {
        const inputs = document.querySelectorAll('.cell-input');
        inputs.forEach(input => {
            const userVal = normalize(input.value);
            const correctVal = input.dataset.correct;
            const parent = input.parentElement;

            parent.classList.remove('correct', 'incorrect');

            if (userVal === '') {
                // VacÃ­o, sin estilo
            } else if (userVal === correctVal) {
                parent.classList.add('correct');
            } else {
                parent.classList.add('incorrect');
            }
        });
    }

    // Iniciar al cargar
    window.onload = initGame;

</script>
</body>
</html>
